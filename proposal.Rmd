---
title: "proposal"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r message=FALSE, warning=FALSE}
library(ggplot2)
library(tidyverse)
library(dplyr)
library(lubridate)
library(readxl)
```

## Team Members

* Molly Buckler

* Armando Castillo

* Binaya Shrestha

* Dongming Li

* John Langenwalter

* Muhamad-Imran-Bin Maszeri



## Data set

### Links: 

* https://docs.opendata.aws/noaa-ghcn-pds/readme.html (Weather data)

* https://data.cdc.gov/dataset/LymeDisease_9211_county/smai-7mz9 (Lyme disease data)




## Data set overview

* Weather data

  * Contains the max and min temp. and precipitation rates for any given day.
  

* Lyme disease data

  * Contains confirmed cases of Lyme disease within four year spans. The years that it spans are 1992-1996, 1997-2001, 2002-2006, and 2007-2011.




## Project plan

* We will average the weather data and use it to compare to the Lyme disease data set. We will also use the individual data sets along with the averaged weather data to answer the questions below.

* Questions:

  * Is there any association with the rate of Lyme disease and the changes to temperature?
  
  * Is there any association with the rate of Lyme disease and the changes to precipitation?

  * Has Lyme disease increased from 1992?
  
  * What changes have happened to the rate of precipitation?
  
  * What changes have happened to the average temperature?
```{r message=FALSE, warning=FALSE}
Temp<-read.csv("AveTempState.csv")
Temp %>%
  group_by(State) %>%
  ggplot(aes(x=Year,y=Ave_Temp),fill=State) + geom_line() + facet_wrap(~State) +
  labs(title = "Changes of Average Temperature in 50 states over 20 years") +
  theme(plot.title = element_text(hjust = 0.5))
Temp2<-Temp %>%
  group_by(State)%>%
  summarise(Ave_Temp=mean(Ave_Temp))
ggplot(Temp2,aes(y=reorder(State,Ave_Temp),weight=Ave_Temp)) + geom_bar() + 
  labs(title = "Average Temperature of 50 states over 20 years",x="Temperature",y="State") + 
  theme(plot.title = element_text(hjust = 0.5),axis.title.x = element_text(face = "bold"),axis.title.y = element_text(face = "bold"),axis.text.y = element_text(size=10, face="bold", colour = "black"))

```
  
  * Which states have the highest rate of Lyme Disease?
```{r message=FALSE, warning=FALSE}
USA_states <- map_data("state")
sName <- USA_states %>%
  mutate(region=str_to_title(USA_states$region))

#head(sName)

#temp <- read.csv("ferWState.csv")
#foo <- temp %>%
#  mutate(region=setNames(state.name, state.abb)[state])

#str(foo)

#sName %>%
#  ggplot(aes(x=long, y=lat)) + geom_path(aes(group=group)) + geom_path(aes(group=group)) + coord_map()

#map1 <- foo %>%
#  left_join(sName, by="region")

#ggplot(map1, aes(x=long, y=lat, fill=temp2011)) + geom_polygon(aes(group=group)) + coord_map()

temp2 <- read.csv("LymeTempPrec2.csv")
ltp <- temp2 %>%
  mutate(region=full) %>%
  select(!c('full'))

ltp %>%
  left_join(sName, by="region") %>%
  ggplot(aes(x=long, y=lat, fill=lyme0711)) + geom_polygon(aes(group=group)) + coord_map() + scale_fill_gradient()
```
  
  * Does the Lyme Disease rate in the states influenced by the weather?
  
```{r message=FALSE, warning=FALSE}
ltp %>%
  left_join(sName, by="region") %>%
  ggplot(aes(x=long, y=lat, fill=temp0711)) + geom_polygon(aes(group=group)) + coord_map() + scale_fill_gradient()

ltp %>%
  left_join(sName, by="region") %>%
  ggplot(aes(x=long, y=lat, fill=prec0711)) + geom_polygon(aes(group=group)) + coord_map() + scale_fill_gradient()
```  

